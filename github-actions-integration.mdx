### Voice Agents Workflow Integration

With Github Actions, you can now automatically run your Hamming test agents whenever you push changes to your Github repository's main branch.

### Before You Get Started

<Note> 

You'll need to configure a Hamming Test Agent before setting up a workflow and take note of the **Dataset ID** and **Agent ID**. For a detailed walkthrough on how to set up a Hamming Test Agent follow [this tutorial](https://docs.hamming.ai/guides/voice-agent). 

</Note>

<Accordion icon="magnifying-glass" title="Finding Your Dataset ID">

To locate your Dataset ID, visit [hamming.ai/datasets](https://app.hamming.ai/datasets?page=1).
On the right side of the dataset, select "Copy ID" to retrieve your ID.

<img src="./images/dataset-id-day.png" alt="Dataset" style={{ width: "400", height: "auto",borderRadius: "10px" }} />

</Accordion>


<Accordion icon="magnifying-glass" title="Finding Your Agent ID">

To find your Agent ID, go to [hamming.ai/voice-agents](https://app.hamming.ai/voice-agents)
and select the name of the voice agent. Your Agent ID is located in the URL immediately following "voice-agents/".

<img src="./images/agent-id-day.png" alt="Agent" style={{ width: "400", height: "auto" , borderRadius: "10px" }} />

For example, **cm1rb0m3600ybxzwm69d7fvst** represents the Agent ID.


</Accordion>


### Step-by-Step Tutorial


<Steps>

 <Step title="Set Up Workflow on Github">

Navigate to your Github Repo containing the code of you voice agent. 
Then click on **Actions** at the top bar and select **Simple workflow** from the templates.
Paste the following code.


```yml
# This is a basic workflow to help you get started with Actions

name: Run Hamming Workflow

on:
  push:
    branches: [ main ]

jobs:
  run-hamming-workflow:
    uses: HammingHQ/hamming-ci-workflow/.github/workflows/hamming_run_agent.yml@main
    with:
      agent_id: ${{ vars.AGENT_ID }}
      dataset_id: ${{ vars.DATASET_ID }}
      to_number: ${{ vars.TO_NUMBER }}
    secrets:
      HAMMING_API_KEY: ${{ secrets.HAMMING_API_KEY }}
```

Your workflow should look like this:

 <img src="/images/workflow-setup.png" alt="workflow-setup" style={{ width: "70%", height: "auto",borderRadius: "10px" }} />

  </Step>

<Step title="Configure your Variables & Secrets">

Navigate to your repository's **Settings** on Github to set up your repository variables (agent_id, dataset_id, to_number) and repository secrets (Hamming API Key). 
Select **Security** from the left navigation bar and then select **Secrets and variables**.

<Note>
The **TO_NUMBER** should be your agent's number. This is the number Hamming's test agent will call when running the test.
</Note>


Your final variables and secrets setup should look like this:

<div style={{ display: "flex", justifyContent: "space-between" }}>
<img src="/images/final-variables-screen.png" alt="final-variables-screen" style={{ width: "100%", height: "auto",borderRadius: "10px" }} />
<img src="/images/final-secrets-screen.png" alt="final-secrets-screen" style={{ width: "70%", height: "auto",borderRadius: "10px" }} />
</div>


<Accordion icon="magnifying-glass" title="Finding Secrets and Variables on Github">
<div style={{ display: "flex", justifyContent: "space-between" }}>
<img src="/images/security-screen.png" alt="security-screen" style={{ width: "90%", height: "auto",borderRadius: "10px" }} />
<img src="/images/actions-secret-and-variables-screen.png" alt="actions-security-screen" style={{ width: "90%", height: "auto",borderRadius: "10px" }} />
</div>
</Accordion>

</Step>

<Step title="Start Test Run">

To test if your workflow is functioning correctly, make a change to your repository and commit it to the main branch. This should trigger the workflow. To see if you workflow is running, make sure you see a round circle next to "Add Files via Upload" in your repo (see below). Once the circle turns into a green checkmark, the workflow has been completed. 

<div style={{ display: "flex", justifyContent: "space-between"}}>
<img src="/images/workflow-running-screen.png" alt="worfklow-running-screen" style={{ width: "95%", height: "auto",borderRadius: "10px" }} />
<img src="/images/workflow-complete-screen.png" alt="worfklow-complete-screen" style={{ width: "95%", height: "auto",borderRadius: "10px" }} />
</div>

</Step>

<Step title="Monitor Workflow">

To monitor your workflow, click on the circle or checkmark and it will open a new window. 
Click on **Details** and it will open the workflow page.

<div style={{ display: "flex", justifyContent: "space-between" }}>
<img src="/images/checks-passed-screen.png" alt="checks-passed-screen" style={{ width: "95%", height: "auto",borderRadius: "10px" }} />
<img src="/images/workflow-in-progress-screen.png" alt="workflow-in-progress-screen" style={{ width: "95%", height: "auto",borderRadius: "10px" }} />
</div>

  </Step>

<Step title="Check the results of the Test" >

If you set up the workflow correctly, you'll be able to track the test calls on the [Hamming Voice Agents Tab](https://app.hamming.ai/voice-agents?page=1).


  </Step>

</Steps>




